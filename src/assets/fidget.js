import React, { useState, useEffect, useRef } from 'react';
import { motion, useAnimation } from 'framer-motion';

export default function PropFidget({size}) {
    const ref = useRef(null);
    const [constraints, setConstraints] = useState({ top: 0, right: 0, bottom: 0, left: 0 });
    const controls = useAnimation(); // useAnimation hook for more control over animations

    useEffect(() =>  {
        const updateConstraints = () =>  {
            if (ref.current) {
                const element = ref.current.getBoundingClientRect();
                setConstraints({
                    top: (window.innerHeight * 0.20) - (element.top),
                    left: (window.innerWidth * 0.30) - (element.left),
                    right: (window.innerWidth) - element.right,
                    bottom: (window.innerHeight) - element.bottom
                });
            }
        };

        updateConstraints();
        window.addEventListener('resize', updateConstraints);
        return () =>  window.removeEventListener('resize', updateConstraints);
    }, []);

    const handleSpin = () =>  {
        controls.start({
            rotate: [0, 360], // Spin from 0 to 360 degrees
            transition: {
                type: 'inertia',
                velocity: 300, // Initial velocity of the spin
                power: 50, // Deceleration power, lower values stop quicker
                timeConstant: 10000, // Time taken to decelerate
                restDelta: 0.5 // When to stop the animation, small values stop closer to the final value
            }
        });
    };

    return (
        <motion.svg
            ref={ref}
            drag
            style={{ cursor: 'grab', scale: size }}
            dragConstraints={constraints}
            animate={controls}
            onClick={handleSpin}
            filter="drop-shadow(0px 0px 20px rgb(1, 1, 1))"
            width="250px"
            height="250px"
            version="1.1"
            viewBox="0 0 24.58 27.694"
            xmlns="http://www.w3.org/2000/svg"
        >
 <defs>
  <radialGradient id="radialGradient705" cx="387.81" cy="394.48" r="14.477" gradientUnits="userSpaceOnUse" />
  <radialGradient id="radialGradient706" cx="388.03" cy="394.63" r="14.086" gradientUnits="userSpaceOnUse" />
 </defs>
 <g transform="translate(-94.721 -121.97)">
  <g transform="matrix(.26458 0 0 .26458 3.3815 32.498)">
   <path d="m391.67 338.17c-5.234 0-9.478 4.972-9.478 10.207 0 1.272 0.251 2.485 0.705 3.593 1.321 3.22 2.357 6.545 2.952 9.955 0.226 1.296 2.074 16.89 2.074 16.89h7.492s1.848-15.595 2.074-16.89c0.595-3.41 1.632-6.736 2.952-9.955 0.455-1.108 0.705-2.321 0.705-3.593 2e-3 -5.234-4.241-10.207-9.476-10.207z" fill="#730e6b"/>
   <path d="m391.62 347.82c-0.809 9.515 0.551 25.604 0.562 27.233h2.539s1.506-12.704 1.69-13.759c0.485-2.778 1.329-5.487 2.405-8.11 0.37-0.903 0.574-1.891 0.574-2.927 0-1.148-0.267-2.272-0.719-3.312-2.06 1.195-4.407 1.321-7.051 0.875z" fill="#44aeef"/>
   <path d="m389.64 347.28c-1.328-0.524-2.55-1.363-3.441-2.456-1.319 1.508-2.136 3.499-2.136 5.548 0 1.021 0.201 1.995 0.566 2.884 1.06 2.585 1.892 5.254 2.37 7.991 0.181 1.04 1.665 13.558 1.665 13.558h2.974c-1.26-8.743-1.247-12.612-1.742-20.718-0.152-2.48-0.232-4.734-0.256-6.807z" fill="#1bca99"/>
   <path d="m397.43 344.38c-0.299 1.148-2.253 1.634-4.362 1.084-2.11-0.55-3.578-1.927-3.278-3.075 0.299-1.148 2.252-1.634 4.362-1.084 2.109 0.55 3.577 1.926 3.278 3.075z" fill="#bfcdd6" opacity=".75"/>
   <path d="m391.67 442.84c-5.234 0-9.478-4.972-9.478-10.207 0-1.272 0.251-2.485 0.705-3.593 1.321-3.22 2.357-6.545 2.952-9.955 0.226-1.296 2.074-16.89 2.074-16.89h7.492s1.848 15.595 2.074 16.89c0.595 3.41 1.632 6.736 2.952 9.955 0.455 1.108 0.705 2.321 0.705 3.593 2e-3 5.234-4.241 10.207-9.476 10.207z" fill="#730e6b"/>
   <path d="m391.62 433.2c-0.809-9.515 0.551-25.604 0.562-27.233h2.539s1.506 12.704 1.69 13.759c0.485 2.778 1.329 5.487 2.405 8.11 0.37 0.903 0.574 1.891 0.574 2.927 0 1.148-0.267 2.272-0.719 3.312-2.06-1.194-4.407-1.321-7.051-0.875z" fill="#44aeef"/>
   <path d="m389.64 433.73c-1.328 0.524-2.55 1.363-3.441 2.456-1.319-1.508-2.136-3.499-2.136-5.548 0-1.021 0.201-1.995 0.566-2.884 1.06-2.585 1.892-5.254 2.37-7.991 0.181-1.04 1.665-13.558 1.665-13.558h2.974c-1.26 8.743-1.247 12.612-1.742 20.718-0.152 2.481-0.232 4.734-0.256 6.807z" fill="#1bca99"/>
   <path d="m397.43 436.64c-0.299-1.148-2.253-1.634-4.362-1.084-2.11 0.55-3.578 1.927-3.278 3.075 0.299 1.148 2.252 1.634 4.362 1.084 2.109-0.549 3.577-1.926 3.278-3.075z" fill="#f1d55a"/>
   <path d="m346.34 364.34c-2.617 4.533-0.433 10.694 4.1 13.312 1.102 0.636 2.278 1.026 3.465 1.186 3.449 0.466 6.847 1.232 10.098 2.421 1.235 0.452 15.664 6.649 15.664 6.649l3.746-6.489s-12.581-9.398-13.59-10.242c-2.655-2.221-5.017-4.781-7.145-7.534-0.732-0.948-1.658-1.771-2.759-2.407-4.534-2.618-10.962-1.429-13.579 3.104z" fill="#730e6b"/>
   <path d="m354.67 369.2c7.835 5.458 22.45 12.325 23.866 13.13l1.27-2.199s-10.249-7.656-11.071-8.343c-2.163-1.809-4.087-3.895-5.821-6.138-0.596-0.772-1.35-1.443-2.248-1.961-0.994-0.574-2.101-0.904-3.228-1.034 4e-3 2.383-1.06 4.479-2.768 6.545z" fill="#44aeef"/>
   <path d="m353.22 370.65c-1.118 0.888-2.455 1.527-3.848 1.752 0.646 1.896 1.962 3.6 3.737 4.624 0.884 0.51 1.828 0.823 2.781 0.952 2.768 0.374 5.496 0.988 8.105 1.943 0.991 0.363 12.574 5.337 12.574 5.337l1.487-2.575c-8.202-3.28-11.546-5.226-18.813-8.851-2.224-1.109-4.216-2.166-6.023-3.182z" fill="#1bca99"/>
   <path d="m354.6 362.46c0.845 0.833 0.288 2.767-1.243 4.32-1.531 1.552-3.457 2.135-4.302 1.301-0.845-0.833-0.289-2.767 1.243-4.32 1.531-1.552 3.457-2.135 4.302-1.301z" fill="#f1d55a"/>
   <path d="m436.99 416.68c-2.617 4.533-9.045 5.722-13.579 3.105-1.102-0.636-2.027-1.46-2.759-2.407-2.128-2.754-4.49-5.314-7.145-7.534-1.009-0.844-13.59-10.241-13.59-10.241l3.746-6.489s14.429 6.197 15.664 6.649c3.251 1.189 6.649 1.955 10.098 2.421 1.187 0.16 2.363 0.55 3.464 1.186 4.534 2.616 6.718 8.777 4.101 13.31z" fill="#730e6b"/>
   <path d="m428.62 411.9c-8.645-4.056-21.899-13.279-23.304-14.103l1.27-2.199s11.755 5.048 12.761 5.416c2.648 0.969 5.416 1.592 8.226 1.972 0.967 0.131 1.925 0.448 2.822 0.966 0.994 0.574 1.834 1.367 2.509 2.279-2.065 1.187-3.348 3.156-4.284 5.669z" fill="#44aeef"/>
   <path d="m428.09 413.88c-0.21 1.412-0.095 2.89 0.406 4.208-1.965 0.388-4.098 0.101-5.873-0.924-0.884-0.51-1.627-1.172-2.215-1.932-1.708-2.21-3.604-4.265-5.736-6.048-0.81-0.677-10.909-8.221-10.909-8.221l1.487-2.575c6.942 5.463 10.299 7.387 17.071 11.867 2.074 1.372 3.986 2.567 5.769 3.625z" fill="#1bca99"/>
   <path d="m434.5 408.58c-1.144-0.315-2.541 1.134-3.12 3.236s-0.12 4.062 1.024 4.377 2.541-1.134 3.12-3.236 0.121-4.062-1.024-4.377z" fill="#44aeef"/>
   <path d="m346.34 416.68c2.617 4.533 9.045 5.722 13.578 3.105 1.102-0.636 2.027-1.46 2.759-2.407 2.128-2.754 4.49-5.314 7.145-7.534 1.009-0.844 13.59-10.241 13.59-10.241l-3.746-6.489s-14.429 6.197-15.664 6.649c-3.251 1.189-6.649 1.955-10.098 2.421-1.187 0.16-2.363 0.55-3.465 1.186-4.532 2.616-6.716 8.777-4.099 13.31z" fill="#730e6b"/>
   <path d="m354.72 411.9c8.645-4.056 21.899-13.279 23.304-14.103l-1.27-2.199s-11.755 5.048-12.761 5.416c-2.648 0.969-5.417 1.592-8.226 1.972-0.967 0.131-1.925 0.448-2.822 0.966-0.994 0.574-1.834 1.367-2.509 2.279 2.065 1.187 3.348 3.156 4.284 5.669z" fill="#44aeef"/>
   <path d="m355.25 413.88c0.21 1.412 0.095 2.89-0.406 4.208 1.965 0.388 4.098 0.101 5.873-0.924 0.884-0.51 1.627-1.172 2.215-1.932 1.708-2.21 3.604-4.265 5.736-6.048 0.81-0.677 10.909-8.221 10.909-8.221l-1.487-2.575c-6.942 5.463-10.299 7.387-17.071 11.867-2.074 1.372-3.985 2.567-5.769 3.625z" fill="#1bca99"/>
   <path d="m348.84 408.58c1.144-0.315 2.541 1.134 3.12 3.236s0.12 4.062-1.024 4.377-2.541-1.134-3.12-3.236-0.121-4.062 1.024-4.377z" fill="#1bca99"/>
   <path d="m436.99 364.34c2.617 4.533 0.433 10.694-4.101 13.312-1.102 0.636-2.278 1.026-3.464 1.186-3.449 0.466-6.847 1.232-10.098 2.421-1.235 0.452-15.664 6.649-15.664 6.649l-3.746-6.489s12.581-9.398 13.59-10.242c2.655-2.221 5.017-4.781 7.145-7.534 0.732-0.948 1.658-1.771 2.759-2.407 4.534-2.618 10.962-1.429 13.579 3.104z" fill="#730e6b"/>
   <path d="m428.66 369.2c-7.835 5.458-22.45 12.325-23.866 13.13l-1.27-2.199s10.249-7.656 11.071-8.343c2.163-1.809 4.087-3.895 5.821-6.138 0.596-0.772 1.35-1.443 2.248-1.961 0.994-0.574 2.101-0.904 3.228-1.034-4e-3 2.383 1.06 4.479 2.768 6.545z" fill="#44aeef"/>
   <path d="m430.12 370.65c1.118 0.888 2.455 1.527 3.848 1.752-0.646 1.896-1.962 3.6-3.737 4.624-0.884 0.51-1.828 0.823-2.781 0.952-2.768 0.374-5.496 0.988-8.105 1.943-0.991 0.363-12.574 5.337-12.574 5.337l-1.487-2.575c8.202-3.28 11.546-5.226 18.813-8.851 2.224-1.109 4.216-2.166 6.023-3.182z" fill="#1bca99"/>
   <path d="m428.74 362.46c-0.845 0.833-0.289 2.767 1.243 4.32 1.531 1.552 3.457 2.135 4.302 1.301 0.845-0.833 0.289-2.767-1.243-4.32-1.531-1.552-3.457-2.135-4.302-1.301z" fill="#f1d55a"/>
   <g fill="#730e6b" opacity=".65">
    <path d="m395.42 378.82s0.654-5.514 1.231-10.257c-1.602-0.362-3.266-0.559-4.977-0.559s-3.375 0.197-4.977 0.559c0.577 4.743 1.231 10.257 1.231 10.257z"/>
    <path d="m387.92 402.2s-0.654 5.514-1.231 10.257c1.602 0.362 3.266 0.559 4.977 0.559s3.375-0.197 4.977-0.559c-0.577-4.743-1.231-10.257-1.231-10.257z"/>
    <path d="m383.42 381.42s-4.447-3.322-8.266-6.193c-2.254 2.435-3.979 5.367-4.985 8.616 4.398 1.872 9.505 4.065 9.505 4.065z"/>
    <path d="m403.67 393.11-3.746 6.489s4.447 3.322 8.266 6.193c2.254-2.435 3.979-5.367 4.985-8.616-4.398-1.873-9.505-4.066-9.505-4.066z"/>
    <path d="m379.67 393.11s-5.107 2.193-9.505 4.065c1.006 3.249 2.731 6.181 4.985 8.616 3.819-2.871 8.266-6.193 8.266-6.193z"/>
    <path d="m403.67 387.91s5.107-2.193 9.505-4.065c-1.006-3.249-2.731-6.181-4.985-8.616-3.819 2.871-8.266 6.193-8.266 6.193z"/>
   </g>
   <circle transform="matrix(.1593 -.9872 .9872 .1593 -56.257 714.95)" cx="391.67" cy="390.51" r="17.038" fill="#730e6b"/>
   <circle transform="matrix(.9226 -.3858 .3858 .9226 -120.33 181.33)" cx="391.67" cy="390.51" r="13.211" fill="#3a3438"/>
   <circle transform="matrix(.887 -.4618 .4618 .887 -136.06 224.98)" cx="391.67" cy="390.51" r="11.86" fill="#f1d55a"/>
   <circle cx="391.67" cy="390.51" r="9.478" fill="url(#radialGradient705)"/>
   <path d="m401.15 390.51c0-3.425-1.817-6.426-4.539-8.091l-4.983 8.064-9.124 2.519c0.835 3.08 3.206 5.665 6.494 6.625l2.662-9.117z" fill="url(#radialGradient706)" opacity=".55"/>
  </g>
 </g>
</motion.svg >

  )
}
     