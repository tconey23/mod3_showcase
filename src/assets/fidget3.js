import React, { useState, useEffect, useRef } from 'react';
import { motion, useAnimation } from 'framer-motion';

export default function PropFidget() {
    const ref = useRef(null);
    const [constraints, setConstraints] = useState({ top: 0, right: 0, bottom: 0, left: 0 });
    const controls = useAnimation(); // useAnimation hook for more control over animations

    useEffect(() =>  {
        const updateConstraints = () =>  {
            if (ref.current) {
                const element = ref.current.getBoundingClientRect();
                setConstraints({
                    top: (window.innerHeight * 0.20) - (element.top),
                    left: (window.innerWidth * 0.30) - (element.left),
                    right: (window.innerWidth) - element.right,
                    bottom: (window.innerHeight) - element.bottom
                });
            }
        };

        updateConstraints();
        window.addEventListener('resize', updateConstraints);
        return () =>  window.removeEventListener('resize', updateConstraints);
    }, []);

    const handleSpin = () =>  {
        // Initiates a spin with deceleration
        controls.start({
            rotate: [0, 360], // Spin from 0 to 360 degrees
            transition: {
                type: 'inertia',
                velocity: 300, // Initial velocity of the spin
                power: 50, // Deceleration power, lower values stop quicker
                timeConstant: 10000, // Time taken to decelerate
                restDelta: 0.5 // When to stop the animation, small values stop closer to the final value
            }
        });
    };

    return (
        <motion.svg
            ref={ref}
            drag
            style={{ cursor: 'grab' }}
            dragConstraints={constraints}
            animate={controls}
            onClick={handleSpin}
            filter="drop-shadow(0px 0px 20px rgb(1, 1, 1))"
            width="250px"
            height="250px"viewBox="0 0 25.6 25" xmlns="http://www.w3.org/2000/svg">
<defs>
  <radialGradient id="SVGID_00000157277815380076414630000014215873638483977890_" cx="283.09" cy="166.66" r="38.884" gradientUnits="userSpaceOnUse">
   <stop stopColor="#3A3438" offset="0"/>
   <stop stopColor="#3A3438" offset=".754"/>
   <stop stopColor="#585356" offset="1"/>
  </radialGradient>
 </defs>
 <g transform="translate(-92.125 -136.28)">
  <g transform="matrix(.26458 0 0 .26458 29.665 104.45)">
   <circle cx="283.09" cy="166.66" r="38.885" fill="url(#SVGID_00000157277815380076414630000014215873638483977890_)"/>
   <g fill="#e8eae9">
    <path d="m298.68 146.66c0.515 0.395 0.613 1.133 0.218 1.648s-1.133 0.613-1.648 0.218-0.613-1.133-0.218-1.648 1.133-0.613 1.648-0.218z"/>
    <path d="m301.21 143.36c0.515 0.395 0.613 1.133 0.218 1.648-0.395 0.516-1.133 0.613-1.648 0.218-0.516-0.395-0.613-1.133-0.218-1.648 0.394-0.515 1.132-0.613 1.648-0.218z"/>
    <path d="m303.74 140.06c0.516 0.395 0.613 1.133 0.218 1.648-0.395 0.516-1.133 0.613-1.648 0.218s-0.613-1.133-0.218-1.648c0.395-0.516 1.133-0.613 1.648-0.218z"/>
    <path d="m306.27 136.76c0.515 0.395 0.613 1.133 0.218 1.648s-1.133 0.613-1.648 0.218-0.613-1.133-0.218-1.648c0.394-0.515 1.132-0.613 1.648-0.218z"/>
   </g>
   <g fill="#e8eae9">
    <path d="m267.49 146.81c0.535-0.368 1.267-0.233 1.635 0.302s0.233 1.267-0.302 1.635-1.267 0.233-1.635-0.302-0.233-1.267 0.302-1.635z"/>
    <path d="m265.13 143.38c0.535-0.368 1.267-0.233 1.635 0.302s0.233 1.267-0.302 1.635-1.267 0.233-1.635-0.302c-0.368-0.534-0.233-1.267 0.302-1.635z"/>
    <path d="m262.78 139.96c0.535-0.368 1.267-0.233 1.635 0.302s0.233 1.267-0.302 1.635-1.267 0.233-1.635-0.302c-0.368-0.534-0.233-1.267 0.302-1.635z"/>
    <path d="m260.42 136.54c0.535-0.368 1.267-0.233 1.635 0.302s0.233 1.267-0.302 1.635-1.267 0.233-1.635-0.302-0.233-1.267 0.302-1.635z"/>
   </g>
   <g fill="#e8eae9">
    <path d="m259.29 175.8c-0.2-0.618 0.139-1.281 0.757-1.48 0.618-0.2 1.281 0.139 1.48 0.757 0.2 0.618-0.139 1.281-0.757 1.48-0.618 0.2-1.28-0.139-1.48-0.757z"/>
    <path d="m255.33 177.08c-0.2-0.618 0.139-1.281 0.757-1.48 0.618-0.2 1.281 0.139 1.48 0.757 0.2 0.618-0.139 1.281-0.757 1.48-0.618 0.2-1.281-0.139-1.48-0.757z"/>
    <path d="m251.38 178.36c-0.2-0.618 0.139-1.281 0.757-1.48 0.618-0.2 1.281 0.139 1.48 0.757 0.2 0.618-0.139 1.281-0.757 1.48-0.618 0.2-1.281-0.139-1.48-0.757z"/>
    <path d="m247.42 179.64c-0.2-0.618 0.139-1.281 0.757-1.48 0.618-0.2 1.281 0.139 1.48 0.757 0.2 0.618-0.139 1.281-0.757 1.48-0.617 0.2-1.28-0.139-1.48-0.757z"/>
   </g>
   <g fill="#e8eae9">
    <path d="m307.03 175.8c0.2-0.618-0.139-1.281-0.757-1.48-0.618-0.2-1.281 0.139-1.48 0.757-0.2 0.618 0.139 1.281 0.757 1.48 0.618 0.2 1.28-0.139 1.48-0.757z"/>
    <path d="m310.98 177.08c0.2-0.618-0.139-1.281-0.757-1.48-0.618-0.2-1.281 0.139-1.48 0.757-0.2 0.618 0.139 1.281 0.757 1.48 0.618 0.2 1.281-0.139 1.48-0.757z"/>
    <path d="m314.94 178.36c0.2-0.618-0.139-1.281-0.757-1.48-0.618-0.2-1.281 0.139-1.48 0.757-0.2 0.618 0.139 1.281 0.757 1.48 0.617 0.2 1.28-0.139 1.48-0.757z"/>
    <path d="m318.89 179.64c0.2-0.618-0.139-1.281-0.757-1.48-0.618-0.2-1.281 0.139-1.48 0.757-0.2 0.618 0.139 1.281 0.757 1.48 0.617 0.2 1.28-0.139 1.48-0.757z"/>
   </g>
   <g fill="#e8eae9">
    <path d="m283.1 192.26c-0.649-1e-3 -1.175-0.528-1.174-1.178 1e-3 -0.649 0.528-1.175 1.178-1.174 0.649 1e-3 1.175 0.528 1.174 1.178-2e-3 0.65-0.529 1.176-1.178 1.174z"/>
    <path d="m283.1 196.42c-0.649-1e-3 -1.175-0.528-1.174-1.178 1e-3 -0.649 0.528-1.175 1.178-1.174 0.649 1e-3 1.175 0.528 1.174 1.177-2e-3 0.65-0.529 1.176-1.178 1.175z"/>
    <path d="m283.09 200.57c-0.649-1e-3 -1.175-0.528-1.174-1.178 1e-3 -0.649 0.528-1.175 1.177-1.174s1.175 0.528 1.174 1.178c0 0.649-0.527 1.175-1.177 1.174z"/>
    <path d="m283.08 204.73c-0.649-1e-3 -1.175-0.528-1.174-1.178 1e-3 -0.649 0.528-1.175 1.177-1.174s1.175 0.528 1.174 1.178c0 0.65-0.528 1.175-1.177 1.174z"/>
   </g>
   <circle transform="matrix(.2268 -.9739 .9739 .2268 56.565 404.58)" cx="283.09" cy="166.66" r="30.527" fill="#535353" opacity=".55"/>
   <g fill="#e3b420">
    <path d="m283.09 120.3c-6.771 0-13.11 2.042-18.561 5.596-1.603 1.045-2.16 3.135-1.317 4.852l15.051 30.642h9.653l15.051-30.642c0.844-1.718 0.286-3.807-1.317-4.852-5.45-3.554-11.79-5.596-18.56-5.596z"/>
    <path d="m237.7 153.27c-2.092 6.439-2.109 13.1-0.414 19.382 0.499 1.848 2.314 3.023 4.208 2.752l33.794-4.846 2.983-9.181-24.491-23.784c-1.373-1.333-3.532-1.449-5.022-0.247-5.065 4.086-8.966 9.485-11.058 15.924z"/>
    <path d="m255.03 206.64c5.478 3.98 11.807 6.054 18.306 6.383 1.911 0.097 3.59-1.266 3.917-3.152l5.834-33.637-7.809-5.674-30.188 15.944c-1.692 0.894-2.469 2.912-1.787 4.7 2.321 6.078 6.249 11.457 11.727 15.436z"/>
    <path d="m328.48 153.27c2.092 6.439 2.109 13.1 0.414 19.382-0.499 1.848-2.314 3.023-4.208 2.752l-33.793-4.846-2.983-9.181 24.491-23.784c1.373-1.333 3.532-1.449 5.022-0.247 5.063 4.086 8.965 9.485 11.057 15.924z"/>
    <path d="m311.14 206.64c-5.478 3.98-11.807 6.054-18.306 6.383-1.911 0.097-3.59-1.266-3.917-3.152l-5.834-33.637 7.81-5.674 30.188 15.943c1.692 0.894 2.469 2.912 1.787 4.7-2.322 6.079-6.251 11.458-11.728 15.437z"/>
   </g>
   <g fill="#f1d55a">
    <path d="m283.09 126.68c-5.716 0-11.006 2.021-15.338 5.448l11.862 24.149h6.953l11.862-24.149c-4.333-3.427-9.623-5.448-15.339-5.448z"/>
    <path d="m243.22 154.51c-1.766 5.437-1.479 11.092 0.441 16.271l26.633-3.819 2.148-6.613-19.301-18.744c-4.598 3.063-8.154 7.469-9.921 12.905z"/>
    <path d="m257.23 202.96c4.625 3.36 10.092 4.834 15.611 4.609l4.598-26.509-5.625-4.087-23.791 12.564c1.491 5.319 4.582 10.063 9.207 13.423z"/>
    <path d="m322.95 154.51c1.766 5.437 1.479 11.092-0.441 16.271l-26.633-3.819-2.149-6.613 19.301-18.744c4.599 3.063 8.156 7.469 9.922 12.905z"/>
    <path d="m308.94 202.96c-4.625 3.36-10.092 4.834-15.611 4.609l-4.598-26.509 5.625-4.087 23.791 12.564c-1.491 5.319-4.583 10.063-9.207 13.423z"/>
   </g>
   <g fill="#e3b420">
    <path d="m287.21 134.58c0 2.265-1.836 4.101-4.102 4.101s-4.102-1.836-4.102-4.101 1.836-4.102 4.102-4.102 4.102 1.837 4.102 4.102z"/>
    <path d="m254.42 157.25c0 2.265-1.836 4.102-4.101 4.102s-4.102-1.836-4.102-4.102 1.836-4.102 4.102-4.102c2.265 1e-3 4.101 1.837 4.101 4.102z"/>
    <path d="m266.54 196.42c0 2.265-1.836 4.102-4.102 4.102-2.265 0-4.101-1.836-4.101-4.102 0-2.265 1.836-4.102 4.101-4.102 2.265 1e-3 4.102 1.837 4.102 4.102z"/>
    <path d="m307.13 196.42c0 2.265-1.836 4.102-4.102 4.102-2.265 0-4.101-1.836-4.101-4.102 0-2.265 1.836-4.102 4.101-4.102 2.265 1e-3 4.102 1.837 4.102 4.102z"/>
    <circle cx="315" cy="157.25" r="4.102"/>
   </g>
   <path d="m309.3 166.66c0-7.256-2.949-13.823-7.714-18.57l-13.651 13.257 8.477-17.258c-3.905-2.311-8.459-3.641-13.325-3.641s-9.42 1.331-13.325 3.641l8.478 17.258-13.651-13.257c-4.764 4.746-7.714 11.313-7.714 18.57 0 2.216 0.278 4.367 0.796 6.422l17.597-2.523-15.451 8.16c3.949 7.604 11.509 13.029 20.412 13.996l2.86-16.488-7.805-5.67h3e-3l2.978-9.166h9.647l2.978 9.166h3e-3l-7.805 5.67 2.86 16.488c8.903-0.966 16.464-6.391 20.412-13.996l-15.452-8.16 17.597 2.523c0.518-2.055 0.795-4.206 0.795-6.422z" fill="#c29c6c" opacity=".55"/>
   <circle cx="283.09" cy="166.66" r="22.564" fill="#3a3438"/>
   <circle transform="matrix(.2101 -.9777 .9777 .2101 60.669 408.42)" cx="283.09" cy="166.66" r="19.172" fill="#9a9a9a"/>
   <circle transform="matrix(.2285 -.9735 .9735 .2285 56.152 404.18)" cx="283.09" cy="166.66" r="13.018" fill="#e8eae9"/>
   <g fill="#3a3438">
    <path d="m274.4 181.71c-0.693-0.4-0.931-1.287-0.531-1.98s1.287-0.931 1.98-0.531 0.931 1.287 0.531 1.98c-0.4 0.694-1.287 0.932-1.98 0.531z"/>
    <path d="m290.32 154.13c-0.693-0.4-0.931-1.287-0.531-1.98s1.287-0.931 1.98-0.531 0.931 1.287 0.531 1.98c-0.4 0.694-1.287 0.932-1.98 0.531z"/>
    <path d="m269.31 177.24c-0.487-0.635-0.368-1.545 0.268-2.033 0.635-0.487 1.545-0.367 2.033 0.268s0.368 1.545-0.267 2.033c-0.637 0.487-1.547 0.367-2.034-0.268z"/>
    <path d="m294.57 157.86c-0.487-0.635-0.368-1.545 0.268-2.033 0.635-0.487 1.545-0.368 2.033 0.268 0.487 0.635 0.368 1.545-0.268 2.033-0.636 0.487-1.546 0.367-2.033-0.268z"/>
    <path d="m266.31 171.16c-0.207-0.773 0.252-1.568 1.025-1.775s1.568 0.252 1.775 1.025-0.252 1.568-1.025 1.775c-0.773 0.208-1.568-0.251-1.775-1.025z"/>
    <path d="m297.06 162.92c-0.207-0.773 0.252-1.568 1.025-1.775s1.568 0.252 1.775 1.025-0.252 1.568-1.025 1.775-1.568-0.252-1.775-1.025z"/>
    <path d="m267.11 166.02c-0.794-0.105-1.353-0.833-1.248-1.626 0.104-0.794 0.833-1.352 1.626-1.248 0.794 0.105 1.353 0.833 1.248 1.626-0.104 0.794-0.832 1.353-1.626 1.248z"/>
    <path d="m298.68 170.18c-0.794-0.105-1.352-0.833-1.248-1.626 0.104-0.794 0.833-1.352 1.626-1.248 0.794 0.105 1.352 0.833 1.248 1.626-0.104 0.794-0.832 1.352-1.626 1.248z"/>
    <path d="m270.56 159.43c-0.4 0.693-1.287 0.931-1.98 0.531s-0.931-1.287-0.531-1.98 1.287-0.931 1.98-0.531c0.694 0.4 0.932 1.287 0.531 1.98z"/>
    <path d="m296.15 175.88c-0.693-0.4-0.931-1.287-0.531-1.98s1.287-0.931 1.98-0.531 0.931 1.287 0.531 1.98c-0.4 0.694-1.287 0.931-1.98 0.531z"/>
    <path d="m272.24 154.92c-0.487-0.635-0.368-1.545 0.268-2.033 0.635-0.487 1.545-0.367 2.033 0.268 0.487 0.635 0.367 1.545-0.268 2.033-0.635 0.487-1.545 0.367-2.033-0.268z"/>
    <path d="m293.93 178.41c0.487 0.635 0.368 1.545-0.267 2.032s-1.545 0.368-2.033-0.268-0.367-1.545 0.268-2.033c0.635-0.486 1.545-0.366 2.032 0.269z"/>
    <path d="m277.57 151.66c-0.207-0.773 0.252-1.568 1.025-1.775s1.568 0.252 1.775 1.025-0.252 1.568-1.025 1.775-1.568-0.252-1.775-1.025z"/>
    <path d="m288.61 181.67c0.207 0.773-0.252 1.568-1.025 1.775s-1.568-0.252-1.775-1.025 0.252-1.568 1.025-1.775 1.568 0.252 1.775 1.025z"/>
    <path d="m284.98 152.32c-0.794-0.105-1.352-0.833-1.248-1.627s0.833-1.352 1.626-1.248c0.794 0.105 1.352 0.833 1.248 1.626-0.104 0.794-0.832 1.353-1.626 1.249z"/>
    <path d="m280.82 183.88c-0.794-0.104-1.353-0.833-1.248-1.626 0.104-0.794 0.833-1.352 1.626-1.248 0.794 0.105 1.353 0.833 1.248 1.626-0.104 0.793-0.833 1.352-1.626 1.248z"/>
   </g>
   <path d="m284.65 174.83c-5.007-0.667-9.057-4.716-9.724-9.724-0.03-0.229-0.054-0.457-0.071-0.684-0.065-0.873-1.327-0.968-1.537-0.118-0.291 1.183-0.371 2.448-0.198 3.757 0.585 4.418 4.158 7.991 8.575 8.575 1.308 0.173 2.574 0.093 3.757-0.198 0.85-0.209 0.755-1.471-0.118-1.537-0.226-0.017-0.454-0.04-0.684-0.071z" fill="#9dacb3" opacity=".32"/>
   <path d="m281.52 158.5c5.007 0.667 9.057 4.716 9.723 9.724 0.031 0.229 0.054 0.457 0.071 0.684 0.065 0.873 1.327 0.968 1.537 0.118 0.291-1.183 0.371-2.448 0.198-3.757-0.585-4.418-4.158-7.991-8.575-8.575-1.308-0.173-2.574-0.093-3.757 0.198-0.85 0.209-0.755 1.471 0.118 1.537 0.228 0.016 0.456 0.04 0.685 0.071z" fill="#fff" opacity=".75"/>
  </g>
 </g>
</motion.svg >

  )
}
     